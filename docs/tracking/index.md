# 記録・再現ガイド

MLflow を中心としたトラッキング基盤を整備する際の設計指針をまとめます。実験結果を **記録し再現可能な状態** に保つため、ソースコード・設定・メタデータを一貫したディレクトリー構成で管理し、チーム全体で同じ運用モデルを共有することを目的とします。

## 推奨ディレクトリー構成

以下は、MLflow Tracking サーバーとクライアントコードを同居させるリポジトリを想定した基本構成です。Terraform などの IaC を採用する場合は `infra/` 配下をさらに分割します。

```text
tracking/
├── README.md              # 運用ポリシーとオンボーディング手順
├── mlflow/                # MLflow サーバー関連の設定
│   ├── docker-compose.yml # トラッキングサーバー/DB/オブジェクトストレージの定義
│   ├── configs/           # backend-store-uri や artifact-store の設定テンプレート
│   └── scripts/           # サーバー起動・バックアップ・メンテナンススクリプト
├── pipelines/             # 実験パイプライン定義（例: Hydra, Airflow DAG）
│   ├── configs/           # ハイパーパラメータや環境ごとの YAML 設定
│   └── src/               # 実験コード（MLflow Tracking API を呼び出す）
├── notebooks/             # 分析用ノートブック（MLflow Widgets を利用）
├── tests/                 # ロギングやメタデータ検証の自動テスト
└── docs/                  # ドキュメント（運用 Runbook、ベストプラクティス）
```

### 構成の意図

- `mlflow/` にトラッキングサーバーのライフサイクルを集約し、環境差分を `configs/` で管理することで再現性を担保します。
- 実験ロジックは `pipelines/` に集約し、コンフィギュレーションとソースを分離することで、異なる実験でも共通の実行フローを維持します。
- `tests/` ではロギング API の破壊的変更やメタデータ破損を早期に検知します。
- `docs/` 配下に Runbook やナレッジを集約し、チーム内でトラッキング基盤の運用方法を共有します。

## ドキュメントの構成

このセクションでは、以下のページで MLflow 公式ドキュメントに倣った解説を提供します。

- [MLflow Tracking](mlflow-tracking.md)
- [MLflow Projects](mlflow-projects.md)
- [MLflow Model Registry](mlflow-model-registry.md)

各ページでは共通して以下の観点を整理します。

1. **概要** – ユースケースと機能のハイライト
2. **インストール** – 推奨される導入手順
3. **クイックスタート** – 最小構成での実行例
4. **主要コンセプト** – API やアーキテクチャの要点
5. **ベストプラクティス** – チームでの運用 tips
6. **関連リファレンス** – 公式ドキュメント・外部リンク

この構成をベースに、プロジェクトの要件に合わせた追加ページやテンプレートを拡張してください。
